<!doctype html>
<html ng-app="app">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>NetVis Setup</title>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,400italic">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
<link href="../install/install.css" rel="stylesheet"><script src="../install/install.js"></script></head>

<body ng-controller="InstallCtrl as installCtrl" ng-init="init()">

    <md-content md-theme="appTheme">

        <div id="main" flex="auto">
            <h1 class="md-display-1">NetVis Setup</h1>
        </div>

        <section id="database" class="page" ng-show="status=='exist'">
                <h1 class="md-headline">Already Insalled</h1>
                <form layout="column" class="md-whiteframe-1dp">
                    <p class="md-body-1">It seems NetVis is already installed.</p>
                </form>

            </section>

        <section id="database" class="page" ng-show="status=='mongoDB'">
            <h1 class="md-headline">1. Setup MongoDB</h1>

            <p class="md-body-1">Provide information for MongoDB connection.</p>

            <form class="md-whiteframe-1dp">
                <div layout="column">

                    <md-input-container class="input-custom">
                        <label>Host</label>
                        <input type="text"
                            required
                            ng-model="mongoDB.host"
                            placeholder="127.0.0.1"
                            value="127.0.0.1"
                            aria-label="MongoDB Host">
                    </md-input-container>

                    <md-input-container class="input-custom">
                        <label>Port</label>
                        <input type="text"
                            required
                            ng-model="mongoDB.port"
                            placeholder="27017"
                            value="27017"
                            aria-label="MongoDB Port">
                    </md-input-container>

                    <md-input-container class="input-custom">
                        <label>Database</label>
                        <input type="text"
                            required
                            ng-model="mongoDB.database"
                            placeholder="netvis"
                            value="netvis"
                            aria-label="MongoDB Database">
                    </md-input-container>

                </div>

                <div md-colors="::{color: 'appTheme-warn'}" ng-if="error">
                    <md-icon md-font-icon="material-icons md-18">warning</md-icon><br/>
                    Something went wrong. Please double check the information you provided.
                </div>

            </form>

            <md-button ng-click="getMongoDBInfo()"
                ng-disabled="getMongoDBDisable()"
                aria-label="Next">Next
                <md-icon md-font-icon="material-icons">arrow_forward</md-icon>
            </md-button>
        </section>

        <section id="meta" class="page"  ng-show="status=='meta'">
            <h1 class="md-headline">2. Website Information</h1>

            <p class="md-body-1">Great. Netvis is able to communicate with your database. Now, please provide the following information. Don't worry, you can alwasys change these setting later.</p>

            <form class="md-whiteframe-1dp">
                <div layout="column">

                    <md-input-container class="input-custom">
                        <label>Website Title</label>
                        <input type="text"
                            ng-model="meta.title"
                            aria-label="Website Title"
                            value="Netvis">
                        <div class="hint">Optional.</div>
                    </md-input-container>

                </div>
            </form>

            <p class="md-body-1">Creater a user account for yourself. This account has administative privileges.</p>

            <form class="md-whiteframe-1dp">
                    <div layout="column">
                        <md-input-container class="input-custom">
                            <label>Your Email</label>
                            <input type="text"
                                required
                                ng-model="user.email"
                                aria-label="User Email">
                            <div class="hint">This is your username.</div>
                        </md-input-container>
    
                        <md-input-container class="input-custom">
                            <label>Password</label>
                            <input type="password"
                                required
                                ng-model="user.password"
                                aria-label="User Password">
                            <div class="hint"><b>Important:</b> You need this password to login.</div>
                        </md-input-container>
    
                    </div>
                </form>

            <md-button ng-click="getMetaInfo()"
                ng-disabled="getMetaDisable()"
                aria-label="Next">Next
                <md-icon md-font-icon="material-icons">arrow_forward</md-icon>
            </md-button>
        </section>

        <section id="email-service" class="page"  ng-show="status=='emailService'">
                <h1 class="md-headline">3. Email Service</h1>

                <p class="md-body-1">Netvis uses email as the main communication tool to invite users and reset passwords.
                    You must setup a free account at <a href="https://sendgrid.com" target="_blank" rel=”noreferrer”>SendGrid</a> to be able to deliver these emails.
                    Please, follow the instructions on their website and provide your unique API KEY bellow.
                    This will be securely stored in the enviroment variables.</p> 
    
                <form class="md-whiteframe-1dp">
                    <div layout="column">
    
                        <md-input-container class="input-custom">
                            <label>SendGrid API KEY</label>
                            <input type="text"
                                required
                                ng-model="meta.sendgridAPI"
                                aria-label="Send Grid API">
                        </md-input-container>
    
                    </div>
                </form>
    
                <md-button ng-click="install()"
                    ng-disabled="installDisable()"
                    aria-label="Install">Install Netvis
                </md-button>

                <div md-colors="::{color: 'appTheme-warn'}" ng-if="error">
                    <md-icon md-font-icon="material-icons md-18">warning</md-icon><br/>
                    Something went wrong. Please double check the information you provided.
                </div>
        </section>

        <section id="success"  ng-show="status=='success'">
            <md-icon md-font-icon="material-icons checked md-warn md-hue-1">check</md-icon>
            <p class="md-body-1"><strong>All done!</strong><br/>
            Use your email and password to access the website.</p>
            <md-button href="{{meta.url}}"
                class="md-fab md-mini md-primary"
                title="{{meta.title}}">
                <md-icon md-font-icon="material-icons">arrow_forward</md-icon>
            </md-button>
        </section>
                
    </md-content>

</body>

</html>